<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="trace">

   <Properties>
    <Property name="DOTCMS_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms.log</Property>
    <Property name="DOTCMS_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="SECURITY_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms-security.log</Property>
    <Property name="SECURITY_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-security-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="SITESEARCH_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms-sitesearch.log</Property>
    <Property name="SITESEARCH_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-sitesearch-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="AUDIT_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms-adminaudit.log</Property>
    <Property name="AUDIT_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-adminaudit-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="USERACTIVITY_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms-userActivity.log</Property>
    <Property name="USERACTIVITY_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-userActivity-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="TEST_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms-test.log</Property>
    <Property name="TEST_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-test-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="PUSHPUBLISH_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms-pushpublish.log</Property>
    <Property name="PUSHPUBLISH_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-pushpublish-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="VELOCITY_LOG_FILE">${sys:DOTCMS_LOGGING_HOME}/dotcms-velocity.log</Property>
    <Property name="VELOCITY_FILENAME_PATTERN">${sys:DOTCMS_LOGGING_HOME}/$${date:yyyy-MM}/dotcms-velocity-%d{MM-dd-yyyy}-%i.log.gz</Property>
    <Property name="PATTERN">%-5level %d [%t] %c:%M(%L): %m%n</Property>
    <Property name="CONSOLE_PATTERN">%-5level %d [%t] %c:%M(%L): %m%n</Property>
    <Property name="MESSAGE_PATTERN">[%d{dd/MM/yy HH:mm:ss:SSS z}] %5p %c{2}: %m%n</Property>
  </Properties>

  <Appenders>
        <Console name="CONSOLE" target="SYSTEM_OUT">
            <PatternLayout pattern="${CONSOLE_PATTERN}"/>
        </Console>

        <Async name="Async">
            <AppenderRef ref="FILE"/>
        </Async>
        <!--  Generic Logging File -->
        <RollingFile name="FILE"
                     fileName="${DOTCMS_LOG_FILE}"
                     filePattern="${DOTCMS_FILENAME_PATTERN}"
                     immediateFlush="false">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
        <!-- Specific Logging Files -->
        <RollingFile name="SECURITY"
        			 fileName="${SECURITY_LOG_FILE}"
                     filePattern="${SECURITY_FILENAME_PATTERN}">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
        <RollingFile name="SITESEARCH"
        			 fileName="${SITESEARCH_LOG_FILE}"
                     filePattern="${SITESEARCH_FILENAME_PATTERN}">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
        <RollingFile name="ADMINAUDIT"
        			 fileName="${AUDIT_LOG_FILE}"
                     filePattern="${AUDIT_FILENAME_PATTERN}">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
        <RollingFile name="USERACTIVITY"
        			 fileName="${USERACTIVITY_LOG_FILE}"
                     filePattern="${USERACTIVITY_FILENAME_PATTERN}">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
        <RollingFile name="TEST"
        			 fileName="${TEST_LOG_FILE}"
                     filePattern="${TEST_FILENAME_PATTERN}">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
        <RollingFile name="PUSHPUBLISH"
                     fileName="${PUSHPUBLISH_LOG_FILE}"
                     filePattern="${PUSHPUBLISH_FILENAME_PATTERN}">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
        <RollingFile name="VELOCITY"
        			 fileName="${VELOCITY_LOG_FILE}"
                     filePattern="${VELOCITY_FILENAME_PATTERN}">
            <PatternLayout pattern="${MESSAGE_PATTERN}"/>
            <Policies>
                <SizeBasedTriggeringPolicy size="20MB"/>
            </Policies>
            <DefaultRolloverStrategy max="10"/>
        </RollingFile>
    </Appenders>
    <Loggers>
        <Root level="INFO">
            <AppenderRef ref="Async"/>
        </Root>
        <Logger name="com.dotcms.repackage.org.directwebremoting" level="warn">
            <AppenderRef ref="FILE"/>
        </Logger>
        <Logger name="com.dotmarketing.portlets.contentlet.business.ReindexThread" level="debug">
            <AppenderRef ref="FILE"/>
        </Logger>
        <Logger name="com.dotcms.repackage.com.bradmcevoy.http" level="info">
            <AppenderRef ref="FILE"/>
        </Logger>
        <Logger name="org.apache.tomcat.util.http.Parameters" level="fatal">
            <AppenderRef ref="FILE"/>
        </Logger>
        <Logger name="com.dotcms.repackage.com.sun.jersey.spi.container.servlet.WebComponent" level="error">
            <AppenderRef ref="FILE"/>
        </Logger>
        <Logger name="com.dotcms.repackage.org.directwebremoting.impl.DefaultConverterManager" level="fatal">
            <AppenderRef ref="FILE"/>
        </Logger>
        <Logger name="com.liferay.portal.action.LoginAction" level="info">
            <AppenderRef ref="SECURITY"/>
        </Logger>
        <Logger name="com.liferay.portal.action.LogoutAction" level="info">
            <AppenderRef ref="SECURITY"/>
        </Logger>
        <Logger name="com.liferay.portal.action.LoginAsAction" level="info">
            <AppenderRef ref="SECURITY"/>
        </Logger>
        <Logger name="com.liferay.portal.action.LogoutAsAction" level="info">
            <AppenderRef ref="SECURITY"/>
        </Logger>
        <Logger name="com.dotmarketing.util.SecurityLogger" level="info">
            <AppenderRef ref="SECURITY"/>
        </Logger>
        <Logger name="org.apache.nutch" level="info">
            <AppenderRef ref="SITESEARCH"/>
        </Logger>
        <Logger name="com.dotcms.repackage.org.apache.hadoop" level="info">
            <AppenderRef ref="SITESEARCH"/>
        </Logger>
        <Logger name="com.dotmarketing.util.AdminLogger " level="info">
            <AppenderRef ref="ADMINAUDIT"/>
        </Logger>
        <Logger name="com.dotmarketing.util.ActivityLogger" level="info">
            <AppenderRef ref="USERACTIVITY"/>
        </Logger>
        <Logger name="com.dotmarketing.util.PushPublishLogger" level="info">
            <AppenderRef ref="PUSHPUBLISH"/>
        </Logger>
        <Logger name="com.dotmarketing.servlets.test.ServletTestRunner" level="info">
            <AppenderRef ref="TEST"/>
        </Logger>
        <Logger name="com.dotmarketing.velocity.VelocityServlet" level="info">
            <AppenderRef ref="VELOCITY"/>
        </Logger>
        <Logger name="com.dotmarketing.viewtools" level="info">
            <AppenderRef ref="VELOCITY"/>
        </Logger>
        <Logger name="org.apache.velocity" level="warn">
            <AppenderRef ref="VELOCITY"/>
        </Logger>
    </Loggers>
</Configuration>
